<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Title</title>
</head>
<body>
<div id="app">
  <h2>{{message}}</h2>
  <h3>练习要求：</h3>
  <p>1.父组件向子组件传递number1和number2</p>
  <p>2.子组件接收number1（num1）和number2（num2）后，实时改变num1和num2，同时父组件的number1和number2也要改变</p>
  <p>3.监听num1改变同时，num2的值乘以100，num2改变时，num1除以100,并且父组件也跟着改变</p>
  <p style="color: red">
    注意：子组件如果要改变从父组件传过来的值，需要先在data（）{return{dnum1:this.num1}}重新定义才可以使用，并且新名字不能和接收的名字一样</p>


  <cpn1 :num1="number1" :num2="number2" @num2change="num2Change"  @num1change="num1Change"></cpn1>
</div>
<template id="cpn">
  <div>
    <h3>子组件</h3>
    <h4>data:{{dnum1}}</h4>
    <h4>props:{{num1}}</h4>
    <!--    <input type="text" v-model="dnum1" @input="num1Ipunt">-->
    <!--    v-model是v-bind和v-on两个命令的结合，能实时监听dom元素，并更新vue实例里的数据，但是这里v-on（input事件）还有其他操作，不仅仅是改变数据，
            所以不是最佳方法，可直接使用v-bind和v-on(input事件)-->
    <input type="text" :value="dnum1" @input="num1Ipunt">
    <h4>data:{{dnum2}}</h4>
    <h4>props:{{num2}}</h4>
    <input type="text" :value="dnum2" @input="num2Ipunt">
  </div>
</template>

<script src="../js/vue.js"></script>
<script>

  const app = new Vue({
    el: '#app',
    data: {
      message: '组件通信-父子组件通信案例',
      number1: 0,
      number2: 0
    },
    methods: {
      num1Change(value)
      {
        this.number1=parseFloat(value);
      },
      num2Change(value)
      {
       this.number2=parseFloat(value);
      }
    },
    components: {
      'cpn1': {
        template: '#cpn',
        props: {
          num1: Number,
          num2: Number
        },
        data() {
          return {
            dnum1: this.num1,//把num1赋值到dnum1（如果和props里一样的名字会报错）
            dnum2: this.num2
          }
        },
        methods: {
          num1Ipunt(event) {
            // console.log(event.target.value)
            this.dnum1=event.target.value;
            //子传父：改变父组件number1
            this.$emit('num1change', this.dnum1)


            //num2要乘以100，并且传给父组件改变number2的值
            this.dnum2=this.dnum1 * 100;
            this.$emit('num2change', this.dnum2)
          },
          num2Ipunt(event)
          {
            this.dnum2=event.target.value;
            //子传父：改变父组件number2
            this.$emit('num2change', this.dnum2)

            //num1要除以100，并且传给父组件改变number1的值
            this.dnum1=this.dnum2 / 100;
            this.$emit('num1change', this.dnum1)
          }

        }
      }
    }
  })
</script>
</body>
</html>